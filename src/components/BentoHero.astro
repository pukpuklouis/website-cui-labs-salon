---
import { Image } from 'astro:assets';
import SplitText from './ui/SplitText.astro';
---

<section id="bento-hero" class="relative w-full bg-off-white overflow-hidden pt-24 md:pt-32 lg:pt-40 pb-16">
  <!-- Sticky Navigation Backdrop (activates on scroll) -->
  <div id="nav-backdrop" class="fixed top-0 left-0 w-full h-20 -translate-y-full backdrop-blur-md bg-off-white/70 z-40 transition-transform duration-500"></div>
  
  <!-- Hero Bento Grid -->
  <div class="container mx-auto px-4 sm:px-6 lg:px-8">
    <div class="grid grid-cols-4 md:grid-cols-8 lg:grid-cols-12 gap-4 md:gap-6 lg:gap-8">
      
      <!-- Main Title Block -->
      <div class="col-span-4 md:col-span-5 lg:col-span-6 flex flex-col justify-center">
        <div class="overflow-hidden mb-4">
          <p id="hero-tagline" class="text-charcoal/70 text-sm md:text-base tracking-widest uppercase transform translate-y-full opacity-0">
            台北頂級髮藝沙龍
          </p>
        </div>
        
        <div class="overflow-hidden">
          <SplitText 
            text="萃沙龍"
            splitBy="chars"  
            tag="h1" 
            animationType="fadeUp" 
            className="text-6xl md:text-7xl lg:text-8xl font-serif font-bold text-charcoal mb-4" 
            options={{ duration: 0.7, stagger: 0.08, delay: 0.3 }} 
            inView={true} 
            inViewAmount={0.1}
          />
        </div>
        
        <div class="overflow-hidden">
          <SplitText 
            text="CUI LABS SALON"
            splitBy="chars"  
            tag="h2" 
            animationType="fadeUp" 
            className="text-2xl md:text-3xl lg:text-4xl tracking-wider text-champagne-gold font-light mb-6" 
            options={{ duration: 0.7, stagger: 0.04, delay: 0.6 }} 
            inView={true} 
            inViewAmount={0.1}
          />
        </div>
        
        <div class="overflow-hidden">
          <p id="hero-motto" class="text-charcoal/80 text-lg md:text-xl max-w-md transform translate-y-full opacity-0">
            深厚美學素養與精湛技藝的設計師，精心雕琢每款造型，探索技術深度，美學眼光與匠人精神的融合。
          </p>
        </div>
        
        <div class="mt-8 overflow-hidden">
          <div id="hero-cta" class="transform translate-y-full opacity-0">
            <a href="/booking" class="inline-block bg-champagne-gold text-charcoal font-medium py-3 px-6 rounded-md hover:bg-champagne-gold/90 transition-all duration-300">
              預約諮詢
            </a>
            <a href="/services" class="inline-block ml-4 border border-charcoal/30 text-charcoal font-medium py-3 px-6 rounded-md hover:bg-charcoal/5 transition-all duration-300">
              探索服務
            </a>
          </div>
        </div>
        
        <!-- Scroll Indicator -->
        <div class="hidden md:block mt-16">
          <div id="scroll-indicator" class="flex items-center opacity-0">
            <div class="w-8 h-8 rounded-full border border-charcoal/30 flex items-center justify-center mr-3">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="animate-bounce">
                <path d="M12 5v14M5 12l7 7 7-7"></path>
              </svg>
            </div>
            <span class="text-charcoal/60 text-sm">向下滾動探索</span>
          </div>
        </div>
      </div>
      
      <!-- Hero Image Block -->
      <div class="col-span-4 md:col-span-3 lg:col-span-6 relative">
        <div id="hero-image-container" class="w-full h-full overflow-hidden rounded-xl opacity-0">
          <Image 
            src="/Cui_Salon_img/Cui_Salon_IMG_016.avif" 
            alt="CUI Salon Model" 
            width={1200} 
            height={1600} 
            class="w-full h-full object-cover object-center scale-110"
            loading="eager"
            fetchpriority="high"
          />
          
          <!-- Floating Logo -->
          <div id="floating-logo" class="absolute top-8 right-8 w-16 h-16 md:w-24 md:h-24 opacity-0">
            <Image 
              src="/logo/cui-logo-zh.svg" 
              alt="CUI Logo" 
              width={120} 
              height={120} 
              class="w-full h-full"
            />
          </div>
        </div>
      </div>
      
      <!-- Secondary Images (Desktop Only) -->
      <div class="hidden lg:block col-span-4 lg:col-span-6 lg:col-start-7">
        <div class="grid grid-cols-2 gap-4 mt-4">
          <div id="secondary-image-1" class="overflow-hidden rounded-lg opacity-0">
            <Image 
              src="/Cui_Salon_img/Cui_Salon_IMG_013.avif" 
              alt="CUI Salon Detail" 
              width={600} 
              height={400} 
              class="w-full h-full object-cover"
            />
          </div>
          <div id="secondary-image-2" class="overflow-hidden rounded-lg opacity-0">
            <Image 
              src="/Cui_Salon_img/Cui_Salon_IMG_014.avif" 
              alt="CUI Salon Detail" 
              width={600} 
              height={400} 
              class="w-full h-full object-cover"
            />
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  import { animate, stagger, inView, scroll } from "motion";
  
  // Elements
  const heroTagline = document.getElementById('hero-tagline');
  const heroMotto = document.getElementById('hero-motto');
  const heroCta = document.getElementById('hero-cta');
  const scrollIndicator = document.getElementById('scroll-indicator');
  const heroImageContainer = document.getElementById('hero-image-container');
  const floatingLogo = document.getElementById('floating-logo');
  const secondaryImage1 = document.getElementById('secondary-image-1');
  const secondaryImage2 = document.getElementById('secondary-image-2');
  const navBackdrop = document.getElementById('nav-backdrop');
  
  // Initial animations
  const heroSequence = () => {
    // Animate hero tagline
    if (heroTagline) {
      animate(heroTagline, { 
        opacity: [0, 1], 
        y: ['100%', '0%'] 
      }, { 
        duration: 0.7, 
        delay: 0.1 
      });
    }
    
    // Animate hero motto
    if (heroMotto) {
      animate(heroMotto, { 
        opacity: [0, 1], 
        y: ['100%', '0%'] 
      }, { 
        duration: 0.7, 
        delay: 0.2 
      });
    }
    
    // Animate hero CTA
    if (heroCta) {
      animate(heroCta, { 
        opacity: [0, 1], 
        y: ['100%', '0%'] 
      }, { 
        duration: 0.7, 
        delay: 0.3 
      });
    }
    
    // Animate scroll indicator
    if (scrollIndicator) {
      animate(scrollIndicator, { 
        opacity: [0, 1] 
      }, { 
        duration: 0.7, 
        delay: 1.2 
      });
    }
  };
  
  const imageSequence = () => {
    // Animate hero image container
    if (heroImageContainer) {
      animate(heroImageContainer, { 
        opacity: [0, 1], 
        scale: [1.1, 1] 
      }, { 
        duration: 1, 
        delay: 0.4 
      });
    }
    
    // Animate floating logo
    if (floatingLogo) {
      animate(floatingLogo, { 
        opacity: [0, 1], 
        rotate: [-10, 0] 
      }, { 
        duration: 0.7, 
        delay: 1 
      });
    }
    
    // Animate secondary image 1
    if (secondaryImage1) {
      animate(secondaryImage1, { 
        opacity: [0, 1], 
        y: [20, 0] 
      }, { 
        duration: 0.7, 
        delay: 0.8 
      });
    }
    
    // Animate secondary image 2
    if (secondaryImage2) {
      animate(secondaryImage2, { 
        opacity: [0, 1], 
        y: [20, 0] 
      }, { 
        duration: 0.7, 
        delay: 1 
      });
    }
  };
  
  // Run animations when DOM is loaded
  document.addEventListener('DOMContentLoaded', () => {
    // Execute hero sequence
    heroSequence();
    
    // Execute image sequence
    imageSequence();
    
    // Parallax effect on hero image
    const heroImage = heroImageContainer?.querySelector('img');
    if (heroImage && heroImageContainer) {
      scroll(
        animate(heroImage, { 
          y: [0, -50],
          scale: [1, 1.05]
        }),
        { 
          target: heroImageContainer,
          offset: ["start start", "end start"] 
        }
      );
    }
    
    // Sticky navigation backdrop
    if (navBackdrop) {
      scroll(
        animate(navBackdrop, { 
          y: ['-100%', '0%']
        }),
        { 
          offset: [0, 100] 
        }
      );
    }
    
    // Floating logo subtle animation
    if (floatingLogo) {
      animate(
        floatingLogo,
        { y: [0, -10, 0] },
        { 
          duration: 5,
          repeat: Infinity,
          easing: 'ease-in-out'
        }
      );
    }
  });
</script>

<style>
  /* Custom styles for the hero section */
  #bento-hero {
    min-height: calc(100vh - 80px);
  }
  
  /* Define custom properties */
  :root {
    --color-off-white: #f8f7f4;
    --color-charcoal: #2d2d2d;
    --color-champagne-gold: #e6d2b5;
  }
  
  .bg-off-white {
    background-color: var(--color-off-white);
  }
  
  .text-charcoal {
    color: var(--color-charcoal);
  }
  
  .text-champagne-gold {
    color: var(--color-champagne-gold);
  }
  
  .bg-champagne-gold {
    background-color: var(--color-champagne-gold);
  }
  
  .border-charcoal {
    border-color: var(--color-charcoal);
  }
  
  .font-serif {
    font-family: 'Georgia', serif;
  }
</style>
