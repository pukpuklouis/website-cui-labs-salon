---
// src/pages/index.astro
import Layout from '../layouts/Layout.astro';
import AnimatedHero from '../components/AnimatedHero.astro';
import ServiceCard from '../components/ServiceCard.astro';
import BlogPostPreview from '../components/BlogPostPreview.astro';
import { getCollection } from 'astro:content';
import InfiniteSlider from '../components/ui/InfiniteSlider.astro';
import { Image } from 'astro:assets';
import ImageReveal from '../components/ui/ImageReveal.astro';
import SplitText from '../components/ui/SplitText.astro';
import FeatureSection from '../components/featureSection.astro';
import ScrollTextReveal from '../components/ui/ScrollTextReveal.astro';
import ParallaxImageWrapper from '../components/ui/ParallaxImage.astro';
import StylistSection from '../components/StylistSection.astro';
// Navigation properties
export const navlinkData = {
  navTitle: '首頁',
  navOrder: 1,
  navVisibility: 'all'
};

// Fetch featured blog posts
const featuredPosts = (await getCollection('blog', ({ data }) => data.featured === true))
  .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
  .slice(0, 3);

const services = (await getCollection('services'))[0].data.slice(0, 3);
//add number of services

// SEO Metadata
const pageTitle = "Home - CUI Labs Salon";
const pageDescription = "Welcome to CUI Labs Salon, where cutting-edge technology meets expert hair styling. Discover our services and book your appointment today.";
const exampleImageUrl = "https://picsum.photos/seed/parallax1/1200/800";
const exampleImageUrl2 = "https://picsum.photos/seed/parallax2/1200/800";
---

<Layout title={pageTitle} description={pageDescription}>
    <AnimatedHero />
    <FeatureSection />
    <section>
      <ScrollTextReveal 
      message="In every strand lies the potential for artistry, waiting to be sculpted into a masterpiece of personal style" 
      className="text-left mx-4 md:mx-16 my-32"
      fontSize="text-5xl md:text-7xl lg:text-8xl"
      animationDuration={2.3}
      animationDelay={0.1}
      animationType="spring"
      fontStyle="font-soligant"
      animationBounce={0.2}
      />
      <ScrollTextReveal 
      message="髮絲之間 都蘊含 美的可能性 為您雕琢出 獨一無二 髮型" 
      className="text-right mx-4 md:mx-16 font-thin text-gray-400 mt-16 mb-32"
      fontSize="text-6xl md:text-8xl lg:text-8xl"
      animationDuration={1}
      animationDelay={0.1}
      animationType="spring"
      fontStyle="font-sans"
      animationBounce={0.2}
      />
    </section>
    <!-- Featured Services Section -->
    <section id="featured-services" class="py-16 px-4 sm:px-6 lg:px-8 bg-gray-50 dark:bg-gray-800">
      <div class="max-w-7xl mx-auto">
        <h2 class="text-3xl font-extrabold text-gray-900 dark:text-white text-center mb-12">Featured Services</h2>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
          {services.map((service) => (
            <ServiceCard service={service} />
          ))}
        </div>
      </div>
    </section>    
    <SplitText 
    text={`This is the first line. 
    This is the second line. 
    And the third one.`}
    splitBy="lines" 
    tag="h1" 
    animationType="fadeUp" 
    className="text-4xl font-extrabold text-gray-900 dark:text-white text-center mb-12" 
    options={{ duration: 0.5, stagger: 0.2, }} 
    inView={true} 
    />
    <!-- brands Section -->

    <section>
      <InfiniteSlider gap={56} speed={20} direction="normal" class="hidden md:block mb-8 bg-gray-50" mask={true} duplicateCount={2}>
        <Image src="/logo/brand-GaBee.svg" alt="Logo" width="160" height="80" class="inline-block transition-all duration-300" />
        <Image src="/logo/brand-Zenz.svg" alt="Logo" width="120" height="80" class="inline-block transition-all duration-300" />
        <Image src="/logo/brand-simply-zen.svg" alt="Logo" width="220" height="80" class="inline-block transition-all duration-300" />
        <Image src="/logo/brand-zone-concept.svg" alt="Logo" width="280" height="80" class="inline-block transition-all duration-300" />
        <Image src="/logo/brand-Previa.svg" alt="Logo" width="160" height="80" class="inline-block transition-all duration-300" />
        <Image src="/logo/brand-TOKIO-INKARAMI.svg" alt="Logo" width="120" height="80" class="inline-block transition-all duration-300" />
        <Image src="/logo/Cui-logo-grey.svg" alt="Logo" width="80" height="80" class="inline-block transition-all duration-300" />
      </InfiniteSlider>
      <InfiniteSlider id="mobile-slider" gap={0} speed={20} direction="normal" class="block md:hidden mb-8 bg-gray-50" mask={true} duplicateCount={4}>
        <Image src="/logo/brand-GaBee.svg" alt="Logo" width="160" height="80" class="scale-70 inline-block transition-all duration-300" />
        <Image src="/logo/brand-Zenz.svg" alt="Logo" width="120" height="80" class="scale-70 inline-block transition-all duration-300" />
        <Image src="/logo/brand-simply-zen.svg" alt="Logo" width="220" height="80" class="scale-70 inline-block transition-all duration-300" />
        <Image src="/logo/brand-zone-concept.svg" alt="Logo" width="280" height="80" class="scale-70 inline-block transition-all duration-300" />
        <Image src="/logo/brand-Previa.svg" alt="Logo" width="160" height="80" class="scale-70 inline-block transition-all duration-300" />
        <Image src="/logo/brand-TOKIO-INKARAMI.svg" alt="Logo" width="120" height="80" class="scale-70 inline-block transition-all duration-300" />
        <Image src="/logo/Cui-logo-grey.svg" alt="Logo" width="80" height="80" class="scale-70 inline-block transition-all duration-300" />
      </InfiniteSlider>
    </section>
    <ImageReveal />
    <!-- Stylist Bio Section -->
    <StylistSection />
    <!-- Latest Blog Posts Section -->
    <section class="py-16 px-4 sm:px-6 lg:px-8 bg-gray-50 dark:bg-gray-800">
      <div class="max-w-7xl mx-auto">
        <h2 class="text-3xl font-extrabold text-gray-900 dark:text-white text-center mb-12">Latest Blog Posts</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
          {featuredPosts.map(post => (
            <BlogPostPreview post={post} />
          ))}
        </div>
        <div class="text-center mt-12">
          <a href="/blog" class="text-primary-600 dark:text-primary-400 hover:underline font-medium">
            View All Posts
          </a>
        </div>
      </div>
    </section>

    <!-- Final Call to Action Section -->
    <section class="py-16 px-4 sm:px-6 lg:px-8 bg-primary-600 dark:bg-primary-700 text-center">
      <div class="max-w-3xl mx-auto">
        <h2 class="text-3xl font-extrabold text-white mb-6">Ready for Your Transformation?</h2>
        <p class="text-lg text-primary-100 mb-8">Book your appointment today and experience the future of hair care at CUI Labs Salon.</p>
        <a href="/booking" class="inline-block bg-white dark:bg-gray-900 text-primary-600 dark:text-white font-semibold py-3 px-8 rounded-lg shadow-md hover:bg-gray-100 dark:hover:bg-gray-700 transition duration-300 ease-in-out text-lg">
          Book Now
        </a>
      </div>
    </section>
    {/* Blog Preview section will be added here */}
    {/* Other sections (Featured Services, Stylist Bios, Blog Preview) will be added here in later tasks */}
</Layout>
